# MCP Configuration Examples

This directory contains example MCP (Model Context Protocol) configuration files for testing the PocketBase MCP server with different clients.

## ⚠️ Important: VSCode vs Claude Desktop

**If you're using Claude Code in VSCode** (most developers):
- **Don't use these examples directly**
- **Run `make vscode-mcp-setup` instead**
- This auto-generates `.vscode/mcp.json` with correct paths
- See [../MCP_INTEGRATION.md](../MCP_INTEGRATION.md#vscode-claude-code-setup)

**If you're using Claude Desktop** (standalone app):
- Use `claude_desktop_config.json` below
- Manual configuration required

---

## Files

### `claude_desktop_config.json`
Configuration for **Claude Desktop** standalone application.

**NOT for VSCode/Claude Code** - use `make vscode-mcp-setup` instead.

**Location**: `~/Library/Application Support/Claude/claude_desktop_config.json`

**Usage**:
1. Copy this file content
2. Replace `/absolute/path/to/wellknown` with your actual path
3. Merge with existing Claude Desktop config (or create new file)
4. Restart Claude Desktop

### `claude_code_config.json`
Configuration example for **Claude Code** (VSCode Extension).

**Deprecated** - Use `make vscode-mcp-setup` which creates `.vscode/mcp.json` automatically.

This file is kept for reference only.

### `mcp_inspector_config.json`
Configuration for MCP Inspector (interactive testing tool).

**Usage**:
```bash
# Option 1: Use Makefile (recommended)
make test-mcp-inspector

# Option 2: Use config file directly
npx @modelcontextprotocol/inspector --config examples/mcp_inspector_config.json
```

---

## Quick Setup Guide

### For VSCode / Claude Code Users (Recommended)

```bash
# Automated setup - generates .vscode/mcp.json
make vscode-mcp-setup

# Reload VSCode
# Cmd+Shift+P → "Developer: Reload Window"

# Test
# Ask Claude: "What PocketBase collections exist?"
```

**That's it!** No manual config needed.

### For Claude Desktop Users

1. **Build Binary**
   ```bash
   make bin
   ```

2. **Get Your Paths**
   ```bash
   # Get absolute path to binary
   echo "$(pwd)/.bin/wellknown-pb"

   # Get absolute path to data directory
   echo "$(pwd)/.data/pb"
   ```

3. **Update Config**
   - Open `~/Library/Application Support/Claude/claude_desktop_config.json`
   - Copy content from `examples/claude_desktop_config.json`
   - Replace `/absolute/path/to/wellknown` with your paths
   - Save and restart Claude Desktop

4. **Test Connection**
   ```
   Ask Claude: "What PocketBase collections exist?"
   ```

### For MCP Inspector (All Users)

```bash
make test-mcp-inspector
# Opens browser at http://localhost:6274
```

---

## Configuration Details

### VSCode Configuration (`.vscode/mcp.json`)

**Auto-generated by `make vscode-mcp-setup`**

```json
{
  "mcpServers": {
    "wellknown-pocketbase": {
      "command": "/full/path/.bin/wellknown-pb",
      "args": ["mcp"],
      "env": {
        "PB_DATA_DIR": "/full/path/.data/pb"
      }
    }
  }
}
```

**Location**: `.vscode/mcp.json` (gitignored, per-developer)
**Template**: `.vscode/mcp.json.example` (committed, for team)
**Scope**: Workspace-only (this project)

### Claude Desktop Configuration

**Must be configured manually**

**Location**: `~/Library/Application Support/Claude/claude_desktop_config.json`
**Scope**: User-global (all projects)

---

## Troubleshooting

### VSCode: "MCP server not found"

1. Check config exists:
   ```bash
   cat .vscode/mcp.json
   ```

2. Verify paths are absolute (not relative)

3. Rebuild if needed:
   ```bash
   make vscode-mcp-setup
   ```

4. Reload VSCode:
   ```
   Cmd+Shift+P → "Developer: Reload Window"
   ```

5. View logs:
   ```
   Cmd+Shift+P → "MCP: Show Output"
   ```

### Claude Desktop: "Command not found"

1. Use **absolute paths** (not relative)
2. Verify binary exists: `ls -la .bin/wellknown-pb`
3. Make it executable: `chmod +x .bin/wellknown-pb`
4. Test manually: `.bin/wellknown-pb mcp`

### Both: "Permission denied"

```bash
chmod +x .bin/wellknown-pb
```

---

## More Information

- **VSCode Setup**: [../MCP_INTEGRATION.md#vscode-claude-code-setup](../MCP_INTEGRATION.md#vscode-claude-code-setup)
- **Desktop Setup**: [../MCP_INTEGRATION.md#claude-desktop-setup](../MCP_INTEGRATION.md#claude-desktop-setup)
- **Testing Guide**: [../TESTING_MCP.md](../TESTING_MCP.md)
- **Run Tests**: `make test-mcp`
